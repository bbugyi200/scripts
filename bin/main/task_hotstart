#!/usr/bin/env python

""" Creates and Immediately Starts New Task """

import argparse
import subprocess as sp
import sys

parser = argparse.ArgumentParser(description=__doc__)
parser.parse_args()

out = sp.check_output(['rofi', '-dmenu', '-p', 'Instant Start']).decode('utf-8')

if not out:
    sys.exit(1)

sp.call('task add {}'.format(out), shell=True)
sp.call(['task', 'start.any:', 'stop'])
sp.call(['task', 'rc.context:none', '+LATEST', 'start'])
sp.call(['task_refresh'])
