#!/bin/bash

###################################################################
#  Attempts to Find Package's Corresponding Category  #
###################################################################

if [[ -z "$1" ]]; then
    echo "usage: $(basename "$0") PACKAGE"
    exit 2
fi

if [[ "$1" == "-x" ]]; then
    shift
    clipboard=true
fi

package="$1"; shift
category="$(emerge --search "%/$package$" | grep "^\*" | awk '{print $2}' | awk -F'/' '{print $1}')"

if [[ "$clipboard" = true ]]; then
    printf "$category/$package" | xclip -sel clip
else
    printf "$category"
fi
