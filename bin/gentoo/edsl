#!/usr/bin/env python

"""Prints out Days Since Last [MAINTEANCE TASK]"""

from dateutil.parser import parse
from datetime import datetime

import gutils

############################################################################################
#  gutils library: https://github.com/bbugyi200/scripts/tree/master/modules/python/gutils  #
############################################################################################

log = gutils.logging.getEasyLogger(__name__)


def main():
    try:
        timestamp_fname = args.tsfile
        date_str = open(timestamp_fname, 'r').read().rstrip()
        last_clean = parse(date_str)
        delta = datetime.today() - last_clean
        days = delta.days
    except FileNotFoundError:
        days = 99999

    print(days)


if __name__ == "__main__":
    parser = gutils.ArgumentParser()
    parser.add_argument('tsfile', help='Timestamp file.')
    args = parser.parse_args()

    with gutils.logging.context(log, debug=args.debug, verbose=args.verbose):
        main()
