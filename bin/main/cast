#!/usr/bin/env python

""" Wrapper for castnow """

import subprocess as sp

import gutils
import videos

log = gutils.logging.getEasyLogger(__name__)


if __name__ == "__main__":
    parser = gutils.ArgumentParser()
    args = parser.parse_args()

    with gutils.logging.context(log, debug=args.debug):
        video_file = videos.get('video')

        opts = [video_file]
        opts.extend(['-d', "Kelly's Chromecast!!!"])

        srt_file = videos.get('subs')
        if srt_file is not None:
            opts.extend(['-s', srt_file])

        cmd_list = ['gnomecast']
        cmd_list.extend(opts)
        sp.check_call(cmd_list)
