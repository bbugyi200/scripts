#!/bin/bash

###############################################################
#  Notify Me When ... (a particular command is done running)  #
###############################################################

if [[ "$1" == "-c" ]]; then
    shift
    if [[ -z "$1" ]]; then
        echo "usage: $(basename "$0") [-c CMD] [MSG]"
        exit 2
    fi
    cmd="$1"; shift
fi

if [[ -n "$cmd" ]]; then
    while pgrep "$cmd" &> /dev/null; do
        sleep 5
    done

    msg="The '$cmd' command has finished running."
elif [[ -n "$1" ]]; then
    msg="$1"; shift
else
    msg="The tracked command has finished running."
fi

notify-send "Notify Me When..." "$msg"
