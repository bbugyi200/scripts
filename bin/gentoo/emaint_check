#!/bin/bash

TITLE="Maintenance Overdue!"

function warn_user() {
    notify-send -u critical -t 0 "$TITLE" "You should $1 this machine.\n\nIt has been $DAYS days since the $(emanage --pretend "$2") command was last run."
}

DAYS=$(edsl --update)
if [[ $DAYS -ge 7 ]]; then
    warn_user "update" "-u"
fi

DAYS=$(edsl --cleanup)
if [[ $DAYS -ge 30 ]]; then
    warn_user "cleanup" "-c"
fi
