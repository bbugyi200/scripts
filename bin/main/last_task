#!/usr/bin/env python

import subprocess
import sys

try:
    last_task_uuid = open('/home/bryan/.task/.last_task', 'r').read()
except FileNotFoundError as e:
    subprocess.call(['notify-send', 'Last Task', 'File ~/.task/.last_task does not exist.'])
    sys.exit(1)

subprocess.call(['task', '+ACTIVE', 'stop'])

try:
    subprocess.check_call(['task', 'start', last_task_uuid])
except subprocess.CalledProcessError as e:
    subprocess.call(['notify-send', 'Last Task', 'Failed to start last task.'])
    sys.exit(1)
else:
    subprocess.call(['task_refresh', '-T'])
